"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],o=!0,i=!1,a=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,a=t}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}!function(a){var i="SlideOutPanel",o={className:"",closeBtn:"",closeBtnSize:"",contentClass:"",footerClass:"",form:{acceptCharset:"",action:"",active:!1,attributes:"",autocomplete:"",className:"",dataSet:{},enctype:"",id:"",method:"",name:"",novalidate:!1,target:""},headerClass:"",headerText:"",offsetTop:0,position:"",screenClose:!0,screenOpacity:"0.5",screenZindex:"9998",showFooter:!0,showHeader:!0,showScreen:!0,slideFrom:"right",transitionDuration:"0.35s",width:"350px",afterClosed:function(){},afterOpen:function(){},beforeClosed:function(){},beforeOpen:function(){},rendered:function(){}},s={};function n(t,e){if(this.element=t,this.componentElm=a("#".concat(this.element.id)),this.headerElm=a("#".concat(this.element.id,' slot[name="header"]')),this.contentElm=a("#".concat(this.element.id,' slot[name="content"]')),this.footerElm=a("#".concat(this.element.id,' slot[name="footer"]')),void 0===a(this.contentElm).html())return this.destroyPanel(this.element.id,"#".concat(this.element.id,' slot name="content" missing.')),!1;this.settings=this.settings||{},this.settings[t.id]=t,this.settings[t.id]=a.extend({},o,e),s[t.id]=this.settings[t.id],void 0!==e&&void 0!==e.form&&(this.settings[t.id].form=a.extend({},o.form,e.form));var n=this.settings[t.id].transitionDuration;return n=n.replace("s",""),this.settings[t.id].transitionDuration=parseFloat(n),this._defaults=o,this._name=i,this.init(),!1}a.extend(n.prototype,{init:function(){return a("#".concat(this.element.id)).remove(),void 0===a(this.contentElm).html()?this.destroyPanel(this.element.id,"#".concat(this.element.id,' slot name="content" missing.')):(this.addTemplate(),this.settings[this.element.id].rendered.call()),!1},collectProperties:function(t){var e="";return a(t).each(function(){a.each(this.attributes,function(){this.specified&&"name"!==this.name&&(e+="".concat(this.name,'="').concat(this.value,'" '))})}),e},addTemplate:function(){var t=this.settings[this.element.id],i="";if(i+='<div id="'.concat(this.element.id,'" class="slide-out-panel-container" '),i+="".concat(this.collectProperties(this.componentElm)," >"),t.form&&t.form.active){var e=t.form;i+="<form ",i+=""!==e.name?'name="'.concat(e.name,'" '):"",i+=""!==e.acceptCharset?'accept-charset="'.concat(e.acceptCharset,'"'):"",i+=""!==e.action?'action="'.concat(e.action,'" '):"",i+=""!==e.autocomplete?'autocomplete="'.concat(e.autocomplete,'" '):"",i+=""!==e.className?'class="'.concat(e.className,'" '):"",i+=""!==e.id?'id="'.concat(e.id,'" '):"",i+=""!==e.enctype?'enctype="'.concat(e.enctype,'" '):"",i+=""!==e.method?'method="'.concat(e.method,'" '):"",i+=e.novalidate?"novalidate ":"",i+=""!==e.target?'target="'.concat(e.target,'" '):"",0<Object.keys(e.dataSet).length&&Object.entries(e.dataSet).forEach(function(t){var e=_slicedToArray(t,2),n=e[0],o=e[1];i+="data-".concat(n,'="').concat(o,'" ')}),i+=""!==e.attributes?e.attributes:"",i+=" >"}t.showHeader&&(i+=this.buildHeader()),i+=this.buildContent(),t.showFooter&&(i+=this.buildFooter()),t.form&&t.form.active&&(i+="</form>"),i+="</div>",t.showScreen&&(i+='<div class="slide-out-panel-screen" data-id="'.concat(this.element.id,'"></div>')),a("body").append(i),this.updateSections()},updateSections:function(){var t=this.settings[this.element.id],e="#".concat(this.element.id,".slide-out-panel-container");a(e).addClass("".concat(t.slideFrom," ").concat(t.className)).css({display:"block",height:0===t.offsetTop?"initial":"calc(100vh - ".concat(t.offsetTop,")"),left:"right"===t.slideFrom?"initial":"-".concat(t.width),position:t.position,right:"left"===t.slideFrom?"initial":"-".concat(t.width),top:t.offsetTop,transitionDuration:"".concat(t.transitionDuration,"s"),width:t.width});var n=a("".concat(e," header")).attr("class");a("".concat(e," header")).attr({class:"slide-out-header ".concat(t.headerClass," ").concat(n||"")});var o=a("".concat(e," section")).attr("class");a("".concat(e," section")).attr({class:"slide-out-content ".concat(t.contentClass," ").concat(o||"")}),t.showHeader||a("".concat(e," section")).addClass("no-header").append(this.closeBtn());var i=a("".concat(e," footer")).attr("class");a("".concat(e," footer")).attr({class:"slide-out-footer ".concat(t.footerClass," ").concat(i||"")}),a(".slide-out-panel-screen").css({backgroundColor:"rgba(0, 0, 0, ".concat(t.screenOpacity),transitionDuration:"".concat(t.transitionDuration,"s"),zIndex:"-".concat(t.screenZindex)})},buildHeader:function(){var t=this.settings[this.element.id],e=a(this.headerElm),n=e.html(),o="";return o+="<header ",o+="".concat(this.collectProperties(e)," >"),t.headerText||n?(o+=n||"<h4>".concat(t.headerText,"</h4>"),o+=this.closeBtn(),o+="</header>"):(this.destroyPanel(this.element.id,'"headerText" option is missing.'),!1)},buildContent:function(){var t=a(this.contentElm),e=t.html(),n="";return n+="<section ",n+="".concat(this.collectProperties(t)," >"),n+=e,n+="</section>"},buildFooter:function(){var t=a(this.footerElm),e=t.html(),n="";return n+="<footer ",n+="".concat(this.collectProperties(t)," >"),a("#".concat(this.element.id,".slide-out-panel-container .slide-out-footer")).addClass(this.settings[this.element.id].footerClass),e?(n+=e,n+="</footer>"):""},closeBtn:function(){var t=this.settings[this.element.id],e="";return e+='<span class="close-slide-out-panel" data-id="'.concat(this.element.id,'" ').concat(t.closeBtnSize?'style="font-size: '.concat(t.closeBtnSize,'; display: block;"'):"",">"),e+=t.closeBtn||"&#10060",e+="</span>",e},closePanel:function(t,e){var n=1<arguments.length&&void 0!==e&&e,o=s[t];return void 0===o?this.destroyPanel(t,"#".concat(t," doesn't exist.")):a(n).hasClass("slide-out-panel-screen")&&!o.screenClose||(o.beforeClosed.call(),a("#".concat(t)).removeClass("open").css({left:"right"===o.slideFrom?"initial":"-".concat(o.width),right:"left"===o.slideFrom?"initial":"-".concat(o.width)}),a('.slide-out-panel-screen[data-id="'.concat(t,'"')).removeClass("open").css({opacity:0,transitionDuration:"".concat(o.transitionDuration,"s")}),setTimeout(function(){a('.slide-out-panel-screen[data-id="'.concat(t,'"')).css({zIndex:"-".concat(o.screenZindex)}),o.afterClosed.call()},1e3*o.transitionDuration)),!1},destroyPanel:function(t,e){var n=0<arguments.length&&void 0!==t?t:this.element.id,o=1<arguments.length&&void 0!==e&&e;return a("#".concat(n,', .slide-out-panel-screen[data-id="').concat(n,'"]')).remove(),delete s[n],o&&console.error("".concat(i,": ").concat(o)),!1},openPanel:function(t){var e=s[t];return void 0===e?this.destroyPanel(t,"#".concat(t," doesn't exist.")):(e.beforeOpen.call(),a("#".concat(t)).addClass("open").css({left:"right"===e.slideFrom?"initial":0,right:"left"===e.slideFrom?"initial":0}),a('.slide-out-panel-screen[data-id="'.concat(t,'"]')).addClass("open").css({opacity:1,transitionDuration:"".concat(e.transitionDuration,"s"),zIndex:"".concat(e.screenZindex)}),setTimeout(function(){e.afterOpen.call()},1e3*e.transitionDuration)),!1}}),a.fn[i]=function(t){var e=this;return void 0===a(this).attr("id")?(console.error("".concat(i,": Element not found. Element options:"),t),!1):(this.close=function(){var t=a(this).attr("id");n.prototype.closePanel(t)},a("body").on("click",".close-slide-out-panel, .slide-out-panel-screen",function(){var t=a(this).attr("data-id");return n.prototype.closePanel(t,this),!1}),this.destroy=function(){var t=a(e).attr("id");n.prototype.destroyPanel(t)},this.open=function(){var t=a(this).attr("id");n.prototype.openPanel(t)},this.each(function(){a.data(this,"plugin-".concat(i,"-").concat(a(this).attr("id")),new n(this,t))}))}}(jQuery);